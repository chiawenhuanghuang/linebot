<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>LIFF 表單測試</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
</head>
<body>
    <div class="row" style="margin: 10px">
        <div class="col-12" style="margin: 10px">
            <label>換宿類別</label>
            <select id="sel_room_type" class="form-control">
                <option selected disabled hidden>請選擇換宿類別</option>
                <option>校內學士班宿舍</option>
                <option>校內研究生宿舍</option>
                <option>BOT太子學舍</option>
            </select>
            <br />
            <label>現住宿舍類別</label>
            <select id="now_room" class="form-control">
                <option selected disabled hidden>請選擇現住宿舍類別</option>
                <option>校內學士班宿舍</option>
                <option>校內研究生宿舍</option>
                <option>BOT太子學舍</option>
            </select>
            <br />
            <label>現住宿舍類別</label><br>
            <input type="radio" id="now_room_s" value="男一舍" name="Product_1"> 男一舍
            <input type="radio" id="now_room_s" value="女一舍" name="Product_1"> 女一舍
            <input type="radio" id="now_room_s" value="研一男舍" name="Product_1"> 研一男舍<br>
            <input type="radio" id="now_room_s" value="男二舍" name="Product_1"> 男二舍
            <input type="radio" id="now_room_s" value="女二舍" name="Product_1"> 女二舍
            <input type="radio" id="now_room_s" value="研一女舍" name="Product_1"> 研一女舍<br>
            <input type="radio" id="now_room_s" value="男三舍" name="Product_1"> 男三舍
            <input type="radio" id="now_room_s" value="女三舍" name="Product_1"> 女三舍
            <input type="radio" id="now_room_s" value="研三舍" name="Product_1"> 研三舍<br>
            <input type="radio" id="now_room_s" value="男四舍" name="Product_1"> 男四舍
            <input type="radio" id="now_room_s" value="女四舍" name="Product_1"> 女四舍
            <input type="radio" id="now_room_s" value="大一女舍" name="Product_1"> 大一女舍<br>
            <input type="radio" id="now_room_s" value="男五舍" name="Product_1"> 男五舍
            <input type="radio" id="now_room_s" value="女五舍" name="Product_1"> 女五舍<br>
            <input type="radio" id="now_room_s" value="男六舍" name="Product_1"> 男六舍
            <input type="radio" id="now_room_s" value="女六舍" name="Product_1"> 女六舍<br>
            <input type="radio" id="now_room_s" value="男七舍" name="Product_1"> 男七舍
            <input type="radio" id="now_room_s" value="女八舍" name="Product_1"> 女八舍<br>
            <input type="radio" id="now_room_s" value="男八舍" name="Product_1"> 男八舍
            <input type="radio" id="now_room_s" value="女九舍" name="Product_1"> 女九舍<br>
        
            <br />
            <label>現住樓層或房號（可不填）</label>
            <input type="text" id="now_room_floor" class="form-control" />
            <br />
            <form>
            想換到的宿舍<br>
            <input type="checkbox" id="sel_room" value="男一舍" name="Product_1"> 男一舍
            <input type="checkbox" id="sel_room" value="女一舍" name="Product_5"> 女一舍
            <input type="checkbox" id="sel_room" value="研一男舍" name="Product_5"> 研一男舍<br>
            <input type="checkbox" id="sel_room" value="男二舍" name="Product_2"> 男二舍
            <input type="checkbox" id="sel_room" value="女二舍" name="Product_5"> 女二舍
            <input type="checkbox" id="sel_room" value="研一女舍" name="Product_5"> 研一女舍<br>
            <input type="checkbox" id="sel_room" value="男三舍" name="Product_3"> 男三舍
            <input type="checkbox" id="sel_room" value="女三舍" name="Product_5"> 女三舍
            <input type="checkbox" id="sel_room" value="研三舍" name="Product_5"> 研三舍<br>
            <input type="checkbox" id="sel_room" value="男四舍" name="Product_4"> 男四舍
            <input type="checkbox" id="sel_room" value="女四舍" name="Product_5"> 女四舍
            <input type="checkbox" id="sel_room" value="大一女舍" name="Product_5"> 大一女舍<br>
            <input type="checkbox" id="sel_room" value="男五舍" name="Product_5"> 男五舍
            <input type="checkbox" id="sel_room" value="女五舍" name="Product_5"> 女五舍<br>
            <input type="checkbox" id="sel_room" value="男六舍" name="Product_5"> 男六舍
            <input type="checkbox" id="sel_room" value="女六舍" name="Product_5"> 女六舍<br>
            <input type="checkbox" id="sel_room" value="男七舍" name="Product_5"> 男七舍
            <input type="checkbox" id="sel_room" value="女八舍" name="Product_5"> 女八舍<br>
            <input type="checkbox" id="sel_room" value="男八舍" name="Product_5"> 男八舍
            <input type="checkbox" id="sel_room" value="女九舍" name="Product_5"> 女九舍<br>
        
            </form>
            <br />
            <label>想換到的樓層或房號(可不填)</label>
            <input type="text" id="sel_room_type" class="form-control" />
            <br />
            <label>聯絡方式(請留一種方式就好，以免個資外洩) </label>
            <input type="text" id="contact" class="form-control" />
            <br />
            <br />
            <form>
            特殊需求：希望換到的宿舍...（可不填）<br>
            <input type="checkbox" id="roommate" value="1" name="Product_1"> 室友安靜<br>
            <input type="checkbox" id="roommate" value="2" name="Product_2"> 室友較早就寢（12點以前）<br>
            <input type="checkbox" id="roommate" value="3" name="Product_3"> 室友不要打呼<br>
            <input type="checkbox" id="roommate" name="Product_4"> 室友不要太淺眠<br>
            <input type="checkbox" id="roommate" name="Product_5"> 室友乾淨<br>
            </form>
            <br />
            <button class="btn btn-success btn-block" id="sure">確定</button>
        </div>
    </div>

    <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
	<script>
        function initializeLiff(myLiffId) {
            liff.init({liffId: myLiffId });
        }

		function pushMsg(psel_room_type, pnow_room, pnow_room_s, pnow_room_floor, psel_room, psel_room_type, pcontact, proommate) {
			if (psel_room_type == '' || pnow_room == '' || pnow_room_s == ''|| psel_room == ''|| pcontact == '') {  //資料檢查
				alert('尚有必填資料未填寫！');
			 	return;
			}
			var msg = "###";  //回傳訊息字串
			msg = msg + psel_room_type + "/";
			msg = msg + pnow_room + "/";
            msg = msg + pnow_room_s+ "/";
			msg = msg + pnow_room_floor + "/";
            msg = msg + psel_room + "/";
            msg = msg + psel_room_type + "/";
            msg = msg + pcontact + "/";
            msg = msg + proommate;

			liff.sendMessages([  //推播訊息
				{ type: 'text',
				  text: msg
				}
			])
				.then(() => {
					liff.closeWindow();  //關閉視窗
				});
		}

		$(document).ready(function () {
			initializeLiff('{{ liffid }}');  //接收傳遞的 liffid 參數
			$('#sure').click(function (e) {  //按下確定鈕
				pushMsg($('#sel_room_type').val(), $('#now_room').val(), $('#now_room_s').val(), $('#now_room_floor').val(), $('#sel_room').val(), $('#sel_room_type').val(), $('#contact').val(), $('#roommate').val());
			});
		});
	</script>
</body>
</html>